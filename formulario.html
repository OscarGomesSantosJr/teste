<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <base href="home.html">
</head>
<body>

<!--<form method="post" id="formulario" action="http://localhost:8080/gravador">-->
<form id="formulario" name="formulario" method="post">
    <label>NOME</label><input type="text" name="nome" id="nome"/><br>
    <label>IDADE</label><input type="text" name="idade" id="idade"/><br>
    <button type="submit" onclick="enviar()">ENVIAR</button>
</form>

<script>
    async function enviar(){
        var form = document.querySelector('#formulario');
        var nome = document.querySelector('#nome').value;
        var idade = document.querySelector('#idade').value;

        const data = {
            nome: nome,
            idade: idade
        };

        const formData = new FormData();
        formData.append('nome', data.nome);
        formData.append('idade', data.idade);

        form.addEventListener("submit", async event => {
            event.preventDefault();
            
            const enviar = await fetch('http://localhost:8080/gravador', {
                method:  'POST',
                mode:    'no-cors',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body:    JSON.stringify(data),
            });
            //https://www.youtube.com/watch?v=e_uE3WlYvYw
            console.log(data);
            //const response = await enviar.json();
            //console.log(JSON.stringify(formData));
            //console.log(response);

        });
    }
</script>
</body>
</html>